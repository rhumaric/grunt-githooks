#!/usr/bin/env node

// ... Some code that would already have been in the hook

// GRUNT-GITHOOKS START
var exec = require('child_process').exec,
    fs = require('fs');

fs.open('{{expectedWorkingDir}}/Gruntfile.js', 'r', function(err, data) {
  var exitCode = 0;
  if ( err ) {
    // Gruntfile.js does not exist exit cleanly.
    process.exit(exitCode);
  }

  exec('grunt githooks::pre-commit', {
    cwd: '{{expectedWorkingDir}}'
  }, function (err, stdout, stderr) {

    console.log(stdout);

    if (err) {
      console.log(stderr || err);
      exitCode = -1;
    }

    process.exit(exitCode);
  });
});


// GRUNT-GITHOOKS END